<!-- Estructura del Dashboard Rediseñada con Estilo Cómic (Versión Compacta) -->
<div class="bg-purple-100 min-h-screen">
  <!-- NAVBAR SECTION -->
  <nav class="sticky top-0 z-40">
    <div class="px-4 sm:px-6 lg:px-8 bg-white border-b-2 border-black">
      <!-- Altura de la barra de navegación reducida de h-20 a h-16 -->
      <div class="flex items-center justify-between h-16">
        <!-- Logo y Botón de Sidebar -->
        <div class="flex items-center">
          <!-- Tamaño de fuente del logo reducido -->
          <img src="logos/main-logo.webp" alt="Logo" class="w-20 h-20 ms-1" />
        </div>

        <!-- Íconos y Menú de Usuario -->
        <div class="flex items-center gap-4">
          <!--<button class="p-2 rounded-full hover:bg-purple-200">
            <i class="ph-fill ph-bell text-2xl text-black"></i>
          </button>-->

          <!-- Menú de Usuario -->
          <div class="relative">
            <button (click)="toggleUserMenu()"
              class="flex items-center gap-2 comic-button bg-white text-black p-1 rounded-full">
              <!-- Tamaño de imagen de perfil reducido -->
              <img class="w-8 h-8 rounded-full border-2 border-black"
                [src]="'https://placehold.co/100x100/C4B5FD/3730A3?text=' + currentUser.name[0]" alt="User Photo" />
              <i class="ph-fill ph-caret-down text-lg pr-1"></i>
            </button>

            <!-- Dropdown del menú -->
            @if (isUserMenuOpen) {
            <div class="absolute right-0 mt-3 w-63 comic-card bg-white z-50">
              <div class="px-3 py-2 border-b-2 border-black">
                <!-- Tamaños de fuente reducidos -->
                <p class="text-xs font-bold text-gray-900" role="none">
                  {{ currentUser.name }}
                </p>
                <p class="text-xs font-medium text-gray-600" role="none">
                  {{ currentUser.email }}
                </p>
              </div>
              <ul class="py-1" role="none">
                <!--<li>
                  <a href="#"
                    class="block px-3 py-1.5 text-sm font-bold text-gray-700 hover:bg-purple-100">Configuraciones</a>
                </li>-->
                <li>
                  <a (click)="authService.logout()"
                    class="block px-3 py-1.5 text-sm font-bold text-gray-700 hover:bg-purple-100 cursor-pointer">Cerrar
                    sesión</a>
                </li>
              </ul>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- ASIDE SECTION (Sidebar) -->
  <aside class="fixed bottom-0 left-0 z-30 w-full h-16 bg-white border-t-2 border-black 
          sm:top-0 sm:h-screen sm:border-t-0 sm:border-r-2 
          transition-all duration-300 ease-in-out" [ngClass]="isSidebarOpen ? 'sm:w-56' : 'sm:w-18'">
    <!-- Padding superior reducido -->
    <div class="h-full md:px-3 md:py-4 md:overflow-y-auto md:pt-20">
      <ul class="flex h-full w-full items-center justify-around 
               sm:flex-col sm:items-stretch sm:justify-start sm:space-y-2">
        <li>
          <!-- Padding interno reducido -->
          <a routerLink="/dashboard" class="flex items-center p-2.5 comic-button text-black rounded-lg">
            <i class="ph-fill ph-house text-2xl text-[var(--primary-purple)]"></i>
            @if(isSidebarOpen){
              <span class="ms-3 font-bold text-base hidden md:block">Dashboard</span>
            }
          </a>
          @if (!this.isSidebarOpen) {
          <button (click)="toggleSidebar()" class="hidden md:block md:rounded-md cursor-pointer md:ml-13 md:fixed">
            <i class="ph-fill ph-caret-circle-double-right text-4xl text-[var(--primary-purple)]"></i>
          </button>
          } @else {
          <button (click)="toggleSidebar()" class="hidden md:block md:rounded-md cursor-pointer md:ml-48.5 md:fixed">
            <i class="ph-fill ph-caret-circle-double-left text-4xl text-[var(--primary-purple)]"></i>
          </button>
          }
        </li>

        @if (isAdmin$ | async) {
        <li>
          <a routerLink="/analytics" class="flex items-center p-2.5 comic-button bg-white rounded-lg">
            <i class="ph-fill ph-chart-bar text-2xl text-[var(--primary-purple)]"></i>
            @if(isSidebarOpen){
              <span class="ms-3 font-bold text-base hidden md:block">Analíticas</span>
            }
          </a>
        </li>

        <li>
          <a routerLink="/users" class="flex items-center p-2.5 comic-button bg-white text-black rounded-lg">
            <i class="ph-fill ph-users-three text-2xl text-[var(--primary-purple)]"></i>
            @if(isSidebarOpen){
              <span class="ms-3 font-bold text-base hidden md:block">Usuarios</span>
            }
          </a>
        </li>
        }
        <li>
          <a routerLink="/anonymous-post-admin"
            class="flex items-center p-2.5 comic-button bg-white text-black rounded-lg">
            <i class="ph-fill ph-chats-circle text-2xl text-[var(--primary-purple)]"></i>
            @if(isSidebarOpen){
              <span class="ms-3 font-bold text-base hidden md:block">Comunidad</span>
            }
          </a>
        </li>
        <li>
          <a routerLink="/wellness-test-panel"
            class="flex items-center p-2.5 comic-button bg-white text-black rounded-lg">
            <i class="ph-fill ph-boat text-2xl text-[var(--primary-purple)]"></i>
            @if(isSidebarOpen){
              <span class="ms-3 font-bold text-base hidden md:block">Test</span>
            }
          </a>
        </li>

      </ul>
    </div>
  </aside>

  <!-- CONTENT SECTION -->
  <div class="p-4 transition-all duration-300 ease-in-out" [class.sm:ml-56]="isSidebarOpen"
    [class.sm:ml-20]="!isSidebarOpen">
    <div>
      <router-outlet />
    </div>
  </div>
</div>